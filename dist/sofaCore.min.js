/**
 * sofa-core - v0.13.2 - Wed Feb 04 2015 16:32:51 GMT+0100 (CET)
 * http://www.sofa.io
 *
 * Copyright (c) 2014 CouchCommerce GmbH (http://www.couchcommerce.com / http://www.sofa.io) and other contributors
 * THIS SOFTWARE CONTAINS COMPONENTS OF THE SOFA.IO COUCHCOMMERCE SDK (WWW.SOFA.IO)
 * IT IS PROVIDED UNDER THE LICENSE TERMS OF THE ATTACHED LICENSE.TXT.
 */
!function(t,n,e){"use strict";function r(n){if(null===n||i(n))return!1;var e=n.length;return 1===n.nodeType&&e?!0:t.Util.isString(n)||t.Util.isArray(n)||0===e||"number"==typeof e&&e>0&&e-1 in n}function i(t){return t&&t.document&&t.location&&t.alert&&t.setInterval}var o=window.cc={},t=window.sofa=o;t.namespace=function(n){var e,r=n.split("."),i=t;("cc"===r[0]||"sofa"===r[0])&&(r=r.slice(1));var o,u=t;for(e=0;e<r.length;e++)"undefined"==typeof i[r[e]]&&(i[r[e]]={}),e===r.length-2&&(u=i[r[e]]),o=r[e],i=i[r[e]];return{targetParent:u,targetName:o,bind:function(t){u[o]=t}}},t.define=function(n,e){t.namespace(n).bind(e)},t.define("sofa.ConfigService",function(){var n={};return t.Config=t.Config||{},n.getSupportedCountries=function(){return t.Config.countries?t.Config.countries:[]},n.getDefaultCountry=function(){var t=n.getSupportedCountries();return 0===t.length?null:t[0]},n.getLocalizedPayPalButtonClass=function(t){return t?"cc-paypal-button--"+n.get("locale")+"--disabled":"cc-paypal-button--"+n.get("locale")},n.get=function(n,e){var r=t.Config[n];return t.Util.isUndefined(r)&&!t.Util.isUndefined(e)?e:r},n}),t.define("sofa.LocationService",function(){return{path:function(){return window.location.href}}}),t.define("sofa.models.BasketItem",function(){var t=this;return t.quantity=0,t}),t.models.BasketItem.prototype.getPrice=function(){return this.variant&&t.Util.isNumeric(this.variant.price)?this.variant.price:this.product.price},t.models.BasketItem.prototype.getTotal=function(){return t.Util.round(this.quantity*this.getPrice(),2)},t.models.BasketItem.prototype.getVariantID=function(){return this.variant?this.variant.variantID:null},t.models.BasketItem.prototype.getOptionID=function(){return this.variant?this.variant.optionID:null},t.define("sofa.models.Category",function(t){this._config=t}),t.models.Category.prototype.getOriginFullUrl=function(){return this._config.useShopUrls?this.originFullUrl:this.urlId},t.define("sofa.models.Product",function(t){this._config=t}),t.models.Product.prototype.getOriginFullUrl=function(){return this._config.useShopUrls?this.originFullUrl:this.urlKey},t.models.Product.prototype.getImage=function(t){for(var n=0;n<this.images.length;n++)return this.images[n].sizeName&&this.images[n].sizeName.toLowerCase()===t?this.images[n].url:this.images[n].url;return this._config.mediaPlaceholder},t.models.Product.prototype.getMainImage=function(){for(var t,n=0;n<this.images.length;n++)if(this.images[n].main){t=this.images[n].url;break}return t||this.getImage()},t.models.Product.prototype.getAllImages=function(){return this._allImages||(this._allImages=[{url:this.getImage("large")}].concat(this.imagesAlt)),this._allImages},t.models.Product.prototype.hasMultipleImages=function(){return this.getAllImages().length>0},t.models.Product.prototype.hasBasePrice=function(){return this.custom1>0},t.models.Product.prototype.getBasePriceStr=function(n){var e=this.custom1;return n&&n.unitAmount&&(e=1/n.unitAmount*parseFloat(n.price)),t.Util.toFixed(e,2)},t.models.Product.prototype.hasUnit=function(){return t.Util.isString(this.custom3)&&this.custom3.length>0},t.models.Product.prototype.getUnit=function(){return this.custom3},t.models.Product.prototype.hasOldPrice=function(){return t.Util.isNumeric(this.priceOld)&&this.priceOld>0},t.models.Product.prototype.hasVariants=function(){return!!(this.variants&&this.variants.length>0)},t.models.Product.prototype.hasInfiniteStock=function(){return this.qty===e||null===this.qty},t.models.Product.prototype.isOutOfStock=function(){return this.hasInfiniteStock()?!1:!this.hasVariants()&&this.qty<=0||this.areAllVariantsOutOfStock()},t.models.Product.prototype.areAllVariantsOutOfStock=function(){return this.hasVariants()?t.Util.every(this.variants,function(t){return t.stock<=0}):!1},t.models.Product.prototype.hasAttributes=function(){return this.attributes&&Object.keys(this.attributes).length>0},t.define("sofa.Observable",function(){var t={mixin:function(t,n){return n={},t.on=function(e,r){return(n[e]=n[e]||[]).push(r),t},t.once=function(n,e){function r(){e.apply(t.off(n,r),arguments)}return r.h=e,t.on(n,r)},t.off=function(e,r){for(var i=n[e],o=0;r&&i&&i[o];o++)i[o]!==r&&i[o].h!==r||i.splice(o--,1);return o||delete n[e],t},t.emit=function(e){for(var r=n[e],i=0;r&&r[i];)r[i++].apply(t,r.slice.call(arguments,1));return t},t}};return t}),t.observable=new t.Observable,t.Util={isToFixedBroken:"1"!==.9.toFixed(),indicatorObject:{},objectTypes:{"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},domReady:function(t){"complete"===n.readyState?t():window.addEventListener("load",t,!1)},round:function(t,n){var e=Math.pow(10,n);return Math.round(t*e)/e},toFixed:function(n,e){if(n=t.Util.isString(n)?parseFloat(n):n,t.Util.isToFixedBroken){e=e||0;var r=Math.pow(10,e);return(Math.round(n*r)/r).toFixed(e)}return n.toFixed(e)},clone:function(t){if(null===t||"object"!=typeof t)return t;var n;if(t instanceof Date)return n=new Date,n.setTime(t.getTime()),n;if(t instanceof Array){n=[];for(var e=0,r=t.length;r>e;e++)n[e]=this.clone(t[e]);return n}if(t instanceof Object){n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=this.clone(t[i]));return n}throw new Error("Unable to copy obj! Its type isn't supported.")},extend:function(t){for(var n=0;n<arguments.length;n++){var e=arguments[n];if(e!==t)for(var r in e)t[r]=e[r]}return t},createCallback:function(n,e,r){var i=typeof n;if("function"!==i){if("object"!==i)return function(t){return t[n]};var o=keys(n);return function(e){for(var r=o.length,i=!1;r--&&(i=isEqual(e[o[r]],n[o[r]],t.Util.indicatorObject)););return i}}return"undefined"==typeof e?n:1===r?function(t){return n.call(e,t)}:2===r?function(t,r){return n.call(e,t,r)}:4===r?function(t,r,i,o){return n.call(e,t,r,i,o)}:function(t,r,i){return n.call(e,t,r,i)}},findKey:function(n,e,r){var i;return e=t.Util.createCallback(e,r),t.Util.forOwn(n,function(t,n,r){return e(t,n,r)?(i=n,!1):void 0}),i},find:function(n,e,r){var i;return e=t.Util.createCallback(e,r),t.Util.forOwn(n,function(t,n,r){return e(t,n,r)?(i=t,!1):void 0}),i},every:function(n,e,r){var i=!0;return e=t.Util.createCallback(e,r),t.Util.forOwn(n,function(t,n,r){return e(t,n,r)?void 0:(i=!1,!1)}),i},forOwn:function(n,e){var r,i=n,o=i;if(!i)return o;if(!t.Util.objectTypes[typeof i])return o;for(r in i)if(Object.prototype.hasOwnProperty.call(i,r)&&e(i[r],r,n)===!1)return o;return o},debounce:function(t,n,e){var r,i;return function(){var o=this,u=arguments,a=function(){r=null,e||(i=t.apply(o,u))},s=e&&!r;return clearTimeout(r),r=setTimeout(a,n),s&&(i=t.apply(o,u)),i}},isObject:function(t){return"object"==typeof t},isNumber:function(t){return"number"==typeof t},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},isArray:function(t){return t instanceof Array},isFunction:function(t){return"function"==typeof t},isString:function(t){return"string"==typeof t},isUndefined:function(t){return"undefined"==typeof t},isNotNullNorUndefined:function(n){return!t.Util.isUndefined(n)&&null!==n},isEmptyObject:function(t){for(var n in t)if(hasOwnProperty.call(t,n))return!1;return!0},isEmpty:function(t){return this.isArray(t)?!t.length:this.isObject(t)?this.isEmptyObject(t):!0},createGuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=16*Math.random()|0,e="x"===t?n:3&n|8;return e.toString(16)})},capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},Array:{remove:function(t,n){var e=t.indexOf(n);return t.splice(e,1),t}},toJson:function(t){if(!t||!t.length||t.length<2)return null;var n=t.substring(1,t.length-1);return JSON.parse(n)},toFormData:function(t){var n=[];for(var e in t)n.push(encodeURIComponent(e)+"="+encodeURIComponent(t[e]));return n.join("&")},forEach:function(n,e,i){var o;if(n)if(t.Util.isFunction(n))for(o in n)n.hasOwnProperty(o)&&e.call(i,n[o],o);else if(n.forEach&&n.forEach!==t.Util.forEach)n.forEach(e,i);else if(r(n))for(o=0;o<n.length;o++)e.call(i,n[o],o);else for(o in n)n.hasOwnProperty(o)&&e.call(i,n[o],o);return n}},t.define("sofa.util.TreeIterator",function(t,n){var e=this,r=!0;e.iterateChildren=function(n){return r=!0,i(t,n)};var i=function(t,e,o){r=e(t,o),t[n]&&r!==!1&&t[n].forEach(function(n){r!==!1&&i(n,e,t)})}})}(sofa,document);